<html>
    <head>
        <title> tic-tac-toe</title>
    </head> 

    <style>
        * {
            box-sizing: border-box;
        }

        main {
            width: 90vh;
            display: flex;
            flex-wrap: wrap;
        }

        section {
            height: 5vh;
            width: 100vh;
        }

       .cell {
            width: 25vh;
            height: 25vh;
            border: 1px solid black;
            font-size: 10vh;
        }

    </style>

    <body>
        <h1> tic-tac-toe</h1>
     <main id ='board'> </main>
        <div id ='player-select'> </div>
    </body>

    <script>

// state 
    const state = {};

    const resetState = () =>  { 

    state.board = [ 
    null, null, null,
    null, null, null,
    null, null, null ];

    state.players = ['x', 'o'] 
    state.currentPlayerIndex = 0;   

 }

// helper functions
const getCurrentPlayer = () => state.players[state.currentPlayerIndex] // one line no return or {}
 
const changeTurn = () => {
     state.currentPlayerIndex = state.currentPlayerIndex === 0 ? 1 : 0; //ternary decides player order
}

// render
// const renderState = () => {
//     renderBoard();
//     renderPlayer();
// }


// DOM selectors
const boardElem = document.getElementById('board');
const playerTurnElem = document.getElementById('player-select');


// DOM manipulations
const renderBoard = () => { 
    boardElem.innerHTML = ''; // reset board
    for (i = 0; i < state.board.length; i++) { // loops through board
        const square = state.board[i]; // renames state.board[i]
        const cellElem = document.createElement('div') 
        cellElem.classList.add('cell');
        cellElem.dataset.index = i; // adds data-index to divs
        cellElem.innerHTML = square;
        boardElem.appendChild(cellElem);
    }
}
const renderPlayer = () => { 
    const text = `It is ${getCurrentPlayer()}'s turn`
    playerTurnElem.innerText = text;
}
   

// event listeners

boardElem.addEventListener('click', (event) => { //event delegation
    if(event.target.className !== 'cell') return; //keeps user from clicking board

    let cellIndex = event.target.dataset.index; //grabs data-index
    state.board[cellIndex] = 'X';

    changeTurn();
    renderPlayer();
    renderBoard();

}) 

//bootstrapping
resetState();
renderBoard();
// renderPlayer();

    </script>

</html>