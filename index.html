<html>
    <head>
        <title> tic-tac-toe</title>
    </head> 

    <style>
        * {
            box-sizing: border-box;
        }

        main {
            width: 90vh;
            display: flex;
            flex-wrap: wrap;
        }

       .cell {
            width: 25vh;
            height: 25vh;
            border: 1px solid black;
            font-size: 10vh;
        }

    </style>

    <body>
        <h1> tic-tac-toe</h1>
     <main id ='board'> </main>
        <div id ='player-select'> </div>
    </body>

    <script>

// state 
    const state = {};

    const resetState = () =>  { 

    state.board = [ 
    null, null, null,
    null, null, null,
    null, null, null ];

    state.players = ['', ''] 
    state.currentPlayerIndex = 0;   

 }

// helper functions
const getCurrentPlayer = () => state.players[state.currentPlayerIndex] // one line no return or {}
 
const changeTurn = () => {
     state.currentPlayerIndex = state.currentPlayerIndex === 0 ? 1 : 0; //ternary decides player order

const render = () => {
    renderPlayer();
    renderBoard();
    }   
}



// DOM selectors
const boardElem = document.getElementById('board');
const playerTurnElem = document.getElementById('player-select');


// DOM manipulations
const renderBoard = () => { 
    boardElem.innerHTML = ''; // reset board
    for (i = 0; i < state.board.length; i++) { // loops through board
        const square = state.board[i]; // renames state.board[i]
        const cellElem = document.createElement('div') 
        cellElem.classList.add('cell');
        cellElem.dataset.index = i; // adds data-index to divs
        cellElem.innerHTML = square;
        boardElem.appendChild(cellElem);
    }
}
const renderPlayer = () => { 
    let text;
    if (!state.players[0] || !state.players[1]) {
        text = `
            <input name ='player1' placerholder='enter player 1 name'>
            <input name ='player2' placerholder='enter player 2 name'>
            <button class ='start'> Start </button>
            `
    } else {
      text = `${getCurrentPlayer()}'s turn`
    }
    playerTurnElem.innerHTML = text;
}
   

// event listeners

boardElem.addEventListener('click', (event) => { //event delegation
    if(event.target.className !== 'cell') return; //keeps user from clicking board

    let cellIndex = event.target.dataset.index; //grabs data-index
    state.board[cellIndex] = 'X';

    changeTurn();
    renderPlayer();
    renderBoard();
}) 
playerTurnElem.addEventListener('click', (event) => {
    if (event.target.className !== 'start') return;

    const player1input = document.getElementsByName('player1')[0];
    state.players[0] = player1input.value;
    const player2input = document.getElementsByName('player2')[0];
    state.players[1] = player2input.value;

    renderPlayer();
})


//bootstrapping
resetState();
renderBoard();
renderPlayer();

    </script>

</html>